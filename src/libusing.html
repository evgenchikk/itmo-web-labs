<!DOCTYPE html>
<html lang="ru">
<head>
	<title>CodeMirror</title>
	<meta charset="utf-8"/>
	<meta name="author" content="Belonogov Evgeny"/>
	<meta name="description" content="CodeMirror"/>
	<link rel="stylesheet" type="text/css" href="../styles/main.css">

	<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.css" rel="stylesheet"/>  
	<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/theme/dracula.css" rel="stylesheet"/>  <!-- темная тема -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/hint/show-hint.css" rel="stylesheet"/>  <!-- shows css hints -->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.7.0/codemirror.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/css/css.js"></script>  <!-- css-разметка -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/python/python.js"></script>  <!-- python-разметка -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/mode/xml/xml.js"></script>  <!-- xml-разметка -->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/keymap/sublime.js"></script>  <!-- keymap от sublime -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/edit/closebrackets.js"></script>  <!-- autoCloseBrackets -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/edit/matchbrackets.js"></script>  <!-- matchBrackets -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/edit/closetag.js"></script>  <!-- autoCloseTags -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/hint/css-hint.js"></script>  <!-- css hints -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/hint/xml-hint.js"></script>  <!-- xml hints -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.0/addon/hint/show-hint.js"></script>  <!-- shows hints -->

    <script src="../scripts/script.js"></script>
</head>
<body style="height: 100%;">
    <div id="nav-icon3" class="pushmenu" data-title="MENU">
		<span></span>
		<span></span>
		<span></span>
		<span></span>
	</div>
	<nav class="sidebar">
		<div class="text d-flex p-2">
			<h4>МЕНЮ САЙТА</h4>
		  	<div id="nav-icon3" class="pushmenu opened">
				<span></span>
				<span></span>
				<span></span>
				<span></span>
		  	</div>	
		</div>
		<div class="menu-main-menu-container">
		  	<ul id="menu-main-menu">
				<li><a href="../index.html">Главная</a></li>
				<li><a href="./page.html">Галерея фотографий</a></li>
                <li><a href="./plants.html">Таблица</a></li>
                <li><a href="./dhtml.html">Страница с DHTML</a></li>
                <li><a href="./promise.html">Страница с Promise</a></li>
                <li><a href="./libusing.html">Библиотека CodeMirror</a></li>
		  	</ul>
		</div>
	</nav>    
	<div class="hidden-overley"></div>

	<h4>Textarea with css language formatting:</h4>
	<p>Выбор языка:</p>
	<div style="margin-bottom:1%;">
		<form name="languageForm">
			<select tabindex="1" name="languageSelector">
				<option selected value="css">CSS</option>
				<option value="python">Python</option>
				<option value="xml">XML</option>
			</select>
			<span tabindex="2" id="languageSpan"><input type="button" name="languageButton" value="Select" onclick="changeMode()"></span>
		</form>
	</div>
	<textarea id="codeTextarea"></textarea>
	<script>
		document.getElementById('languageSpan').addEventListener('keydown', (e) => {
			if (e.key == 'Enter') {
				document.languageForm.languageButton.click();
			}
		})

		var codeMirror = CodeMirror.fromTextArea(document.getElementById('codeTextarea'), {
			lineNumbers: true,  // enable line numbers   
			matchBrackets: true,  //enable match brackets
			autoCloseBrackets: true, // enable auto complete for brackets
			mode: 'css',  // enable css mode
			indentUnit: 4,  // set tab size  
			theme: 'dracula',  // set theme
			keyMap: 'sublime',  // set sublime keymap
			// extraKeys: {'Enter': 'autocomplete'},
			extraKeys: {'Ctrl-Space': 'autocomplete'}
		});

		
		codeMirror.setSize('50%', '50%');

		function changeMode() {
			if (codeMirror.getMode() != languageForm.languageSelector.value)
				codeMirror.setOption('mode', languageForm.languageSelector.value);

			if (languageForm.languageSelector.value == 'xml')
				codeMirror.setOption('autoCloseTags', true);
			else
				codeMirror.setOption('autoCloseTags', false);

			// alert(codeMirror.getMode().name);
		}
	</script>

    <footer>
        <p id="loadingtime"></p>
        <a href="../index.html" title="Go to the main page"><img src="../images/buttons/back-button.png" height="5%" width="5%"></a>
    </footer>
</body>
</html>